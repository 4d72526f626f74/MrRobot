local T, S = require('translations'), require('shared')

local CharSlot, PlayerID = S.CHAR_SLOT, S.PLAYER_ID

pluto_class Dev
    ScriptGlobal = S.ScriptGlobal
    WriteInt = memory.write_int
    ReadInt = memory.read_int

    function __construct(root)
        self.is_dev = S.Settings:IsSet(S.SettingsBits.DevMode)
        if self.is_dev then
            self.root = root:list(T'Developer', {}, T'Dev')
            self:CreateMenu()
        end
    end

    function CreateMenu()
        self.root:action(T'Source A Crate', {}, T'', function()
            self:SourceCrate(0)
        end)
    end

    function SourceCrate(index, amount)
        -- Global_1853988[plParam1 /*867*/].f_267.f_116[i /*3*/] amount of crates in the warehouse
        self.SetPackedStatBoolCode(32359 + index, true, CharSlot)
        local G = self.ScriptGlobal(1890714 + 12)
        self.WriteInt(G, 16)
        self.WriteInt(G + 0x8, 16)
        self.WriteInt(G + 0x18, 16)
    end

    --[[void]] static function SetPackedStatBoolCode(--[[int]] index,--[[BOOL (bool)]] value,--[[int]] characterSlot)native_invoker.begin_call()native_invoker.push_arg_int(index)native_invoker.push_arg_bool(value)native_invoker.push_arg_int(characterSlot)native_invoker.end_call_2(0xDB8A58AEAA67CD07)end
end

return Dev