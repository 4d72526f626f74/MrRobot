local root = menu.my_root()
local shadow_root = menu.shadow_root()
local T = require('translations')
local Bitfield = require('bitfield')
local Shared = require('shared')
local Globals = Shared.Globals.Tools
local CHAR_SLOT = Shared.CHAR_SLOT

local GetEntityModel = Shared.GetEntityModel
local NetGameserverTransferWalletToBank = Shared.NetGameserverTransferWalletToBank

local ScriptGlobal = Shared.ScriptGlobal
local WriteShort = Shared.WriteShort
local WriteByte = Shared.WriteByte
local WriteInt = Shared.WriteInt
local ReadShort = Shared.ReadShort
local ReadInt = Shared.ReadInt
local ReadByte = Shared.ReadByte
local Scan = Shared.Scan
local Alloc = Shared.Alloc
local CreateTickHandler = Shared.CreateTickHandler
local IsSessionStarted = Shared.IsSessionStarted
local RefByRelPath = Shared.RefByRelPath
local ReverseJoaat = Shared.ReverseJoaat
local Joaat = util.joaat

pluto_class Tools
    function __construct()
        self.root = root:list(T'Tools', {T'rtools'}, T'Tools')
        self:CreateMenu()
    end

    function CreateMenu()
        self.root:action(T'Unlock Arcades', {T'unlockarcades'}, T'Unlock arcades on mazebank foreclosure without going to Lester', function()
            local arcade = ScriptGlobal(Globals.UnlockArcades)
            local bitfield = Bitfield.new(ReadShort(arcade))
        
            bitfield:Set(0x14E) -- set multiple bits using a bitmask instead of doing it like a noob and setting each individually
            bitfield(arcade, 16)
        end)
        
        self.root:action(T'Deposit Wallet Money', {T'depositwalletall'}, T'Deposit all money from your wallet', function()
            local wallet = ReadInt(Scan('') + 0x1D59BC0)
            NetGameserverTransferWalletToBank(CHAR_SLOT, wallet)
        end)
        
        self.root:action(T'Instant $2000', {}, T'', function()
            WriteInt(ScriptGlobal(Globals.GoodBoyTimer), 1)
            util.yield(1000)
            WriteInt(ScriptGlobal(Globals.GoodBoyTimer), 18000000)
            util.yield(500)
        end)
        
        self.root:divider('')

        self.root:toggle_loop(T'Auto Deposit Wallet Money', {T'autodepositwallet'}, T'Automatically deposit all money from your wallet', function()
            local wallet = ReadInt(Scan('') + 0x1D59BC0)
            if wallet > 0 then
                NetGameserverTransferWalletToBank(CHAR_SLOT, wallet)
            end
        end)
    end
end

return Tools